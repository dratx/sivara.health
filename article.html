<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="article-title">Article | Sivara Health</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #F2F0E6; /* Alabaster */
            color: #2A3439; /* Gunmetal */
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
        }
        .sivara-blue { color: #7C9ED9; }
        .sivara-mint { color: #98FF98; }
        .sivara-ice-blue { color: #99FFFF; }
        .bg-sivara-alabaster { background-color: #F2F0E6; }
        .bg-sivara-gunmetal { background-color: #2A3439; }
        .bg-sivara-blue { background-color: #7C9ED9; }
        .border-sivara-blue { border-color: #7C9ED9; }
        .text-sivara-gunmetal { color: #2A3439; }
        .text-sivara-alabaster { color: #F2F0E6; }
        
        /* Dropdown fix: keep open on hover of button or dropdown */
        .group:hover .group-hover\:opacity-100,
        .group:focus-within .group-hover\:opacity-100 {
            opacity: 1 !important;
            visibility: visible !important;
            transition-delay: 0s;
        }
        .group .group-hover\:opacity-100 {
            transition: opacity 0.2s, visibility 0.2s;
            transition-delay: 0.15s;
        }
        .group .group-hover\:opacity-100 {
            visibility: hidden;
            opacity: 0;
        }
        .group:hover > .group-hover\:opacity-100,
        .group:focus-within > .group-hover\:opacity-100 {
            opacity: 1 !important;
            visibility: visible !important;
            transition-delay: 0s;
        }

        /* Menu hover color (header & footer) */
        .menu-link, .footer-link {
            transition: color 0.2s;
        }
        .menu-link:hover, .footer-link:hover {
            color: #7C9ED9 !important;
        }
        /* Dropdown submenu hover background */
        .dropdown-link:hover {
            background-color: #7C9ED9 !important;
            color: #fff !important;
            border-radius: 0.5rem !important;
        }
        .group.force-closed .group-hover\:opacity-100 {
            opacity: 0 !important;
            visibility: hidden !important;
            transition-delay: 0s !important;
        }
        
        /* Loading animation */
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #7C9ED9;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Article content styles */
        .article-content {
            line-height: 1.8;
        }
        .article-content h1,
        .article-content h2,
        .article-content h3,
        .article-content h4,
        .article-content h5,
        .article-content h6 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
            color: #2A3439;
        }
        .article-content h1 { font-size: 2.25rem; }
        .article-content h2 { font-size: 1.875rem; }
        .article-content h3 { font-size: 1.5rem; }
        .article-content h4 { font-size: 1.25rem; }
        .article-content p {
            margin-bottom: 1.5rem;
        }
        .article-content ul,
        .article-content ol {
            margin-bottom: 1.5rem;
            padding-left: 2rem;
        }
        .article-content li {
            margin-bottom: 0.5rem;
        }
        .article-content blockquote {
            border-left: 4px solid #7C9ED9;
            padding-left: 1.5rem;
            margin: 2rem 0;
            font-style: italic;
            color: #2A3439;
            background-color: #f8fafc;
            padding: 1.5rem;
            border-radius: 0.5rem;
        }
        .article-content img {
            max-width: 100%;
            height: auto;
            border-radius: 0.5rem;
            margin: 2rem 0;
        }
        .article-content a {
            color: #7C9ED9;
            text-decoration: underline;
        }
        .article-content a:hover {
            color: #2A3439;
        }
        .article-content code {
            background-color: #f1f5f9;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
        }
        .article-content pre {
            background-color: #f1f5f9;
            padding: 1.5rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin: 2rem 0;
        }
        .article-content pre code {
            background: none;
            padding: 0;
        }
        
        /* Hero image styles */
        .hero-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 12px;
        }
        
        /* 404 styles */
        .error-404 {
            text-align: center;
            padding: 4rem 0;
        }
    </style>
</head>
<body class="antialiased">
    <header class="bg-sivara-alabaster/80 backdrop-blur-md sticky top-0 z-50 shadow-sm" id="main-header">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html#home" class="text-2xl font-bold text-sivara-gunmetal flex items-center">
                <img src="./Sivara Logo Exports/Vector/Sivara Logo.svg" alt="Sivara Health Logo" class="mr-2" style="height: 56px; width: auto;" />
            </a>
            <div class="hidden md:flex items-center space-x-8">
                <div class="relative group">
                    <button class="menu-link text-sivara-gunmetal font-semibold flex items-center focus:outline-none" onclick="window.location.href='index.html'">
                        About
                        <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="absolute left-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg group-hover:opacity-100 group-hover:visible group-focus-within:opacity-100 group-focus-within:visible opacity-0 invisible z-50">
                        <a href="index.html#difference" class="dropdown-link block px-4 py-2 text-sivara-gunmetal">Who We Are</a>
                        <a href="index.html#journey" class="dropdown-link block px-4 py-2 text-sivara-gunmetal">Your Journey</a>
                        <a href="index.html#pricing" class="dropdown-link block px-4 py-2 text-sivara-gunmetal">Pricing</a>
                        <a href="index.html#quality-value" class="dropdown-link block px-4 py-2 text-sivara-gunmetal">Why Thailand</a>
                        <a href="index.html#stories" class="dropdown-link block px-4 py-2 text-sivara-gunmetal">Reviews</a>
                    </div>
                </div>
                <div class="relative group">
                    <button class="menu-link text-sivara-gunmetal font-semibold flex items-center focus:outline-none" onclick="window.location.href='services.html'">
                        Services
                        <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="absolute left-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg group-hover:opacity-100 group-hover:visible group-focus-within:opacity-100 group-focus-within:visible opacity-0 invisible z-50">
                        <a href="services.html#procedures" class="dropdown-link block px-4 py-2 text-sivara-gunmetal">Procedures</a>
                        <a href="services.html#packages" class="dropdown-link block px-4 py-2 text-sivara-gunmetal">Packages</a>
                        <a href="services.html#hospitals" class="dropdown-link block px-4 py-2 text-sivara-gunmetal">Hospitals</a>
                    </div>
                </div>
                <a href="articles.html" class="menu-link text-sivara-gunmetal font-semibold">Articles</a>
                <a href="contact.html" class="menu-link text-sivara-gunmetal font-semibold">Contact</a>
            </div>
            <a href="index.html#consultation" class="hidden md:inline-block bg-sivara-blue text-white font-bold py-2 px-6 rounded-lg shadow-md hover:bg-opacity-90 transition transform hover:scale-105">
                Free Consultation
            </a>
            <button id="mobile-menu-button" class="md:hidden">
                 <svg class="w-6 h-6 text-sivara-gunmetal" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2">
            <div class="border-b border-gray-200 pb-2">
                <button id="about-mobile-toggle" class="w-full text-left text-sivara-gunmetal font-semibold flex items-center justify-between py-2" onclick="window.location.href='index.html'">
                    About
                    <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div id="about-mobile-menu" class="hidden pl-4">
                    <a href="index.html#difference" class="block text-sivara-gunmetal py-1">Who We Are</a>
                    <a href="index.html#journey" class="block text-sivara-gunmetal py-1">Your Journey</a>
                    <a href="index.html#pricing" class="block text-sivara-gunmetal py-1">Pricing</a>
                    <a href="index.html#quality-value" class="block text-sivara-gunmetal py-1">Why Thailand</a>
                    <a href="index.html#stories" class="block text-sivara-gunmetal py-1">Reviews</a>
                </div>
            </div>
            <div class="border-b border-gray-200 pb-2">
                <button id="services-mobile-toggle" class="w-full text-left text-sivara-gunmetal font-semibold flex items-center justify-between py-2" onclick="window.location.href='services.html'">
                    Services
                    <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div id="services-mobile-menu" class="hidden pl-4">
                    <a href="services.html#procedures" class="block text-sivara-gunmetal py-1">Procedures</a>
                    <a href="services.html#packages" class="block text-sivara-gunmetal py-1">Packages</a>
                    <a href="services.html#hospitals" class="block text-sivara-gunmetal py-1">Hospitals</a>
                </div>
            </div>
            <a href="articles.html" class="block text-sivara-gunmetal font-semibold py-2">Articles</a>
            <a href="contact.html" class="block text-sivara-gunmetal font-semibold py-2">Contact</a>
            <a href="index.html#consultation" class="block mt-4 bg-sivara-blue text-white text-center font-bold py-2 px-6 rounded-lg shadow-md hover:bg-opacity-90 transition">
                Free Consultation
            </a>
        </div>
    </header>

    <main>
        <!-- Loading State -->
        <div id="loading" class="container mx-auto px-6 py-20 text-center">
            <div class="loading-spinner"></div>
            <p class="mt-4 text-sivara-gunmetal/70">Loading article...</p>
        </div>

        <!-- 404 Error State -->
        <div id="error-404" class="hidden container mx-auto px-6 py-20">
            <div class="error-404">
                <div class="max-w-md mx-auto">
                    <svg class="w-24 h-24 mx-auto text-sivara-blue/50 mb-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <h1 class="text-3xl font-bold text-sivara-gunmetal mb-4">Article Not Found</h1>
                    <p class="text-sivara-gunmetal/70 mb-6">The article you're looking for doesn't exist or may have been moved.</p>
                    <a href="articles.html" class="inline-block bg-sivara-blue text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-opacity-90 transition transform hover:scale-105">
                        Back to Articles
                    </a>
                </div>
            </div>
        </div>

        <!-- Article Content -->
        <div id="article-content" class="hidden">
            <!-- Breadcrumb -->
            <div class="bg-gray-50 py-4">
                <div class="container mx-auto px-6">
                    <nav class="text-sm">
                        <a href="index.html" class="text-sivara-blue hover:text-sivara-gunmetal">Home</a>
                        <span class="mx-2 text-gray-500">/</span>
                        <a href="articles.html" class="text-sivara-blue hover:text-sivara-gunmetal">Articles</a>
                        <span class="mx-2 text-gray-500">/</span>
                        <span class="text-gray-500" id="breadcrumb-title">Article</span>
                    </nav>
                </div>
            </div>

            <!-- Article Header -->
            <section class="py-12">
                <div class="container mx-auto px-6">
                    <div class="max-w-4xl mx-auto">
                        <div class="mb-6">
                            <div class="text-sivara-blue text-sm mb-2" id="article-date"></div>
                            <h1 class="text-4xl md:text-5xl font-bold text-sivara-gunmetal mb-4" id="article-heading"></h1>
                        </div>
                        <img id="article-hero" class="hero-image" alt="" />
                    </div>
                </div>
            </section>

            <!-- Article Body -->
            <section class="pb-16">
                <div class="container mx-auto px-6">
                    <div class="max-w-4xl mx-auto">
                        <div class="article-content" id="article-body">
                            <!-- Article content will be inserted here -->
                        </div>
                        
                        <!-- Back to Articles -->
                        <div class="mt-12 pt-8 border-t border-gray-200">
                            <a href="articles.html" class="inline-flex items-center text-sivara-blue font-semibold hover:text-sivara-gunmetal transition">
                                <svg class="mr-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                                Back to Articles
                            </a>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="bg-sivara-alabaster border-t border-gray-200">
        <div class="container mx-auto py-12 px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h4 class="font-bold text-lg text-sivara-gunmetal mb-4"><a href="index.html#home" class="footer-link">About</a></h4>
                    <a href="index.html#difference" class="footer-link block text-sivara-gunmetal/70 mb-2">Who We Are</a>
                    <a href="index.html#journey" class="footer-link block text-sivara-gunmetal/70 mb-2">Your Journey</a>
                    <a href="index.html#pricing" class="footer-link block text-sivara-gunmetal/70 mb-2">Pricing</a>
                    <a href="index.html#quality-value" class="footer-link block text-sivara-gunmetal/70 mb-2">Why Thailand</a>
                    <a href="index.html#stories" class="footer-link block text-sivara-gunmetal/70">Reviews</a>
                </div>
                <div>
                    <h4 class="font-bold text-sivara-gunmetal mb-4"><a href="services.html#procedures" class="footer-link">Services</a></h4>
                    <a href="services.html#procedures" class="footer-link block text-sivara-gunmetal/70 mb-2">Procedures</a>
                    <a href="services.html#packages" class="footer-link block text-sivara-gunmetal/70 mb-2">Packages</a>
                    <a href="services.html#hospitals" class="footer-link block text-sivara-gunmetal/70">Hospitals</a>
                </div>
                <div>
                    <h4 class="font-bold text-sivara-gunmetal mb-4"><a href="articles.html" class="footer-link">Articles</a></h4>
                </div>
                <div>
                    <h4 class="font-bold text-sivara-gunmetal mb-4"><a href="contact.html" class="footer-link">Contact</a></h4>
                </div>
            </div>
            <div class="mt-8 pt-8 border-t border-gray-200 text-center text-sivara-gunmetal/60 text-sm">
                <p>&copy; 2025 Sivara Health. All Rights Reserved.</p>
                 <p class="mt-2">Disclaimer: Sivara Health functions exclusively as a medical-tourism facilitator. We do not diagnose conditions, prescribe treatments, or provide medical advice. All clinical decisions and procedures are the sole responsibility of the licensed healthcare professionals who care for you. Every surgery carries inherent risks and individual results may vary. Sivara Health assumes no liability for medical outcomes, complications, or losses arising from the care you receive.</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu functionality
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const aboutMobileToggle = document.getElementById('about-mobile-toggle');
            const aboutMobileMenu = document.getElementById('about-mobile-menu');
            const servicesMobileToggle = document.getElementById('services-mobile-toggle');
            const servicesMobileMenu = document.getElementById('services-mobile-menu');

            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', function() {
                    mobileMenu.classList.toggle('hidden');
                });
            }

            if (aboutMobileToggle && aboutMobileMenu) {
                aboutMobileToggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    aboutMobileMenu.classList.toggle('hidden');
                });
            }

            if (servicesMobileToggle && servicesMobileMenu) {
                servicesMobileToggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    servicesMobileMenu.classList.toggle('hidden');
                });
            }

            // Load article based on URL parameter
            loadArticle();
        });

        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            const results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        async function loadArticle() {
            const slug = getUrlParameter('slug');
            if (!slug) {
                showError404();
                return;
            }

            const loadingEl = document.getElementById('loading');
            const errorEl = document.getElementById('error-404');
            const contentEl = document.getElementById('article-content');
            const repoOwner = 'dratx';
            const repoName = 'sivara.health';
            const articlePath = `content/articles/${slug}.md`;

            try {
                const response = await fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/contents/${articlePath}`);
                if (!response.ok) {
                    if (response.status === 404) {
                        showError404();
                        return;
                    }
                    throw new Error(`GitHub API error: ${response.status}`);
                }
                const fileData = await response.json();
                
                // Decode content and parse frontmatter/body
                const content = atob(fileData.content);
                const frontmatterMatch = content.match(/---([\s\S]*?)---/);
                const bodyMatch = content.match(/---[\s\S]*?---([\s\S]*)/);

                if (!frontmatterMatch || !bodyMatch) throw new Error("Invalid article format.");

                const frontmatterText = frontmatterMatch[1];
                const article = {};
                frontmatterText.trim().split('\n').forEach(line => {
                    const [key, ...valueParts] = line.split(':');
                    const value = valueParts.join(':').trim().replace(/^"(.*)"$/, '$1');
                    article[key.trim()] = value;
                });

                article.body = bodyMatch[1].trim();
                displayArticle(article);

            } catch (error) {
                console.error('Error loading article:', error);
                showError404();
            }
        }

        function showError404() {
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('error-404').classList.remove('hidden');
            document.getElementById('article-content').classList.add('hidden');
        }

        function displayArticle(article) {
            const loadingEl = document.getElementById('loading');
            const errorEl = document.getElementById('error-404');
            const contentEl = document.getElementById('article-content');
            
            // Update page title
            document.title = `${article.title} | Sivara Health`;
            document.getElementById('article-title').textContent = `${article.title} | Sivara Health`;
            
            // Update breadcrumb
            document.getElementById('breadcrumb-title').textContent = article.title;
            
            // Update article header
            const formattedDate = new Date(article.date).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            document.getElementById('article-date').textContent = formattedDate;
            document.getElementById('article-heading').textContent = article.title;
            
            const heroImg = document.getElementById('article-hero');
            heroImg.src = article.hero;
            heroImg.alt = article.title;
            heroImg.onerror = function() {
                this.src = 'https://via.placeholder.com/800x400/7C9ED9/FFFFFF?text=Sivara+Health';
            };

            // Render new block-based body
            let bodyBlocks = [];
            try {
                bodyBlocks = JSON.parse(article.body);
            } catch (e) {
                // fallback: treat as markdown string
                document.getElementById('article-body').innerHTML = marked.parse(article.body);
                loadingEl.classList.add('hidden');
                errorEl.classList.add('hidden');
                contentEl.classList.remove('hidden');
                return;
            }
            const bodyContainer = document.getElementById('article-body');
            bodyContainer.innerHTML = '';
            let carouselIdCounter = 0;
            bodyBlocks.forEach(block => {
                if (block.type === 'text') {
                    const div = document.createElement('div');
                    div.innerHTML = marked.parse(block.content || '');
                    bodyContainer.appendChild(div);
                } else if (block.type === 'image') {
                    const figure = document.createElement('figure');
                    figure.className = 'my-8';
                    const img = document.createElement('img');
                    img.src = block.src;
                    img.alt = block.alt || '';
                    img.className = 'w-full object-cover rounded-lg';
                    figure.appendChild(img);
                    if (block.caption) {
                        const figcaption = document.createElement('figcaption');
                        figcaption.className = 'text-center text-sivara-gunmetal/70 text-sm mt-2';
                        figcaption.textContent = block.caption;
                        figure.appendChild(figcaption);
                    }
                    bodyContainer.appendChild(figure);
                } else if (block.type === 'carousel' && Array.isArray(block.images) && block.images.length > 0) {
                    const carousel = createCarousel(block.images, `carousel-${carouselIdCounter++}`);
                    bodyContainer.appendChild(carousel);
                }
            });
            loadingEl.classList.add('hidden');
            errorEl.classList.add('hidden');
            contentEl.classList.remove('hidden');
        }

        function createCarousel(images, carouselId) {
            // Create main container
            const container = document.createElement('div');
            container.className = 'carousel-container my-6';
            container.setAttribute('data-carousel-id', carouselId);

            // Main image area
            const mainImageContainer = document.createElement('div');
            mainImageContainer.className = 'main-image-container relative';
            const mainImg = document.createElement('img');
            mainImg.src = images[0].src;
            mainImg.alt = images[0].alt || '';
            mainImg.className = 'main-image w-full object-cover rounded-lg';
            mainImageContainer.appendChild(mainImg);

            // Prev button
            const prevBtn = document.createElement('button');
            prevBtn.className = 'carousel-prev absolute top-1/2 left-2 -translate-y-1/2 bg-white/50 hover:bg-white/80 rounded-full p-2 transition';
            prevBtn.innerHTML = '<svg class="w-6 h-6 text-sivara-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>';
            mainImageContainer.appendChild(prevBtn);
            // Next button
            const nextBtn = document.createElement('button');
            nextBtn.className = 'carousel-next absolute top-1/2 right-2 -translate-y-1/2 bg-white/50 hover:bg-white/80 rounded-full p-2 transition';
            nextBtn.innerHTML = '<svg class="w-6 h-6 text-sivara-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>';
            mainImageContainer.appendChild(nextBtn);
            container.appendChild(mainImageContainer);

            // Thumbnails
            const thumbnailScroller = document.createElement('div');
            thumbnailScroller.className = 'thumbnail-scroller flex overflow-x-auto space-x-2 p-2 mt-2';
            images.forEach((img, idx) => {
                const thumb = document.createElement('img');
                thumb.src = img.src;
                thumb.alt = img.alt || '';
                thumb.setAttribute('data-index', idx);
                thumb.className = `thumbnail h-20 w-auto object-cover rounded cursor-pointer border-2 ${idx === 0 ? 'border-sivara-blue' : 'border-transparent'}`;
                thumbnailScroller.appendChild(thumb);
            });
            container.appendChild(thumbnailScroller);

            // Carousel state
            let currentIndex = 0;
            function updateCarousel(newIndex) {
                currentIndex = (newIndex + images.length) % images.length;
                mainImg.src = images[currentIndex].src;
                mainImg.alt = images[currentIndex].alt || '';
                // Update thumbnail borders
                Array.from(thumbnailScroller.children).forEach((thumb, idx) => {
                    thumb.classList.toggle('border-sivara-blue', idx === currentIndex);
                    thumb.classList.toggle('border-transparent', idx !== currentIndex);
                });
                // Scroll active thumbnail into view
                const activeThumb = thumbnailScroller.children[currentIndex];
                if (activeThumb && typeof activeThumb.scrollIntoView === 'function') {
                    activeThumb.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                }
            }
            // Thumbnail click
            Array.from(thumbnailScroller.children).forEach((thumb, idx) => {
                thumb.addEventListener('click', () => updateCarousel(idx));
            });
            // Prev/Next click
            prevBtn.addEventListener('click', () => updateCarousel(currentIndex - 1));
            nextBtn.addEventListener('click', () => updateCarousel(currentIndex + 1));

            return container;
        }
    </script>
</body>
</html>

